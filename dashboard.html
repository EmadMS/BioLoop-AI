<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BioLoop | Global Analytics</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root { --accent: #00ff88; --dark: #050a10; }
body { background: var(--dark); color: white; font-family: 'Inter', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
.dashboard-container { width: 95%; max-width: 1400px; padding: 40px 0; }
.summary-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
.stat-card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 40px; border-radius: 30px; backdrop-filter: blur(20px); cursor: pointer; transition: 0.3s; }
.stat-card:hover { border-color: var(--accent); transform: translateY(-5px); }
.chart-box { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 50px; border-radius: 30px; height: 500px; width: 100%; box-sizing: border-box; cursor: pointer; }
h1 { font-size: 3rem; margin-bottom: 40px; text-align: center; }
h2 { color: var(--accent); font-size: 4rem; margin: 10px 0; }
p { opacity: 0.7; font-size: 1.1rem; }
</style>
</head>
<body>

<div class="dashboard-container">
<h1>Industrial <span class="accent-text">ESG Insights</span></h1>
<div class="summary-grid">
<div class="stat-card" onclick="window.location.href='insights_co2.html'">
<p>Calculated CO2 Offset</p>
<h2 id="total-co2">0kg</h2>
<p>View Deep-Dive Carbon Audit &rarr;</p>
</div>
<div class="stat-card" onclick="window.location.href='insights_social.html'">
<p>Social Impact Factor</p>
<h2 id="total-social">0</h2>
<p>View Redistribution Analytics &rarr;</p>
</div>
</div>

<div class="chart-box" onclick="window.location.href='insights_trends.html'">
<h3>Efficiency Forecasting (AI Predictive Model)</h3>
<canvas id="mainDashboardChart"></canvas>
</div>
</div>

<script>
// Data Extraction from Entry Portal
const rawData = JSON.parse(localStorage.getItem('multiBioData')) || {};
let totalWeight = 0;
// Summing only non-empty fields to provide accurate calculations
Object.values(rawData).forEach(stream => {
if(stream && stream.w) totalWeight += parseFloat(stream.w);
});

// Updating UI with calculated outcomes [cite: 133, 203]
document.getElementById('total-co2').innerText = (totalWeight * 2.5).toFixed(1) + "kg";
document.getElementById('total-social').innerText = Math.floor(totalWeight * 1.5) + " Meals";

// Initializing the Main Trend Graph
const ctx = document.getElementById('mainDashboardChart').getContext('2d');
new Chart(ctx, {
type: 'line',
data: {
labels: ['Wk 1', 'Wk 2', 'Wk 3', 'Today (Live)'],
datasets: [{
label: 'Recovery Efficiency %',
data: [45, 62, 78, totalWeight > 0 ? 92 : 0],
borderColor: '#00ff88',
backgroundColor: 'rgba(0, 255, 136, 0.1)',
fill: true,
tension: 0.4,
borderWidth: 4,
pointRadius: 6,
pointBackgroundColor: '#00ff88'
}]
},
options: {
responsive: true,
maintainAspectRatio: false,
plugins: { legend: { labels: { color: 'white', font: { size: 14 } } } },
scales: {
y: { beginAtZero: true, ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' } },
x: { ticks: { color: 'white' }, grid: { display: false } }
}
}
});
</script>
</body>
</html>